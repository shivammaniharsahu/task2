<!DOCTYPE html>
<html>
<head>
	<title>hey</title>

        <meta charset="utf-8">
         <meta name="viewport" content="initial-scale=1">
          <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
        <!-- jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
        <!-- Popper JS -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
        <!-- Latest compiled JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
        <script src="https://www.w3schools.com/lib/w3.js"></script>
                  <style>
                .h1{
                    text-shadow: 2px 2px 5px red;
                }
                .body{
                  background-color:#46a09f;
                }
          </style>    
</head>
<body>
            <div class="h1">
            	<h1>
                <center>
            	       	Enter The Details You Want To Update
                </center>
            	</h1>
              </div>
              <div class="container">
               <div class="col-sm-8 m-auto d-block">   <!--d for display block and m for margin-->
                    <form   class="bg-light">
                      <div class="form-group">
                            <label>
                              ID
                            </label>
                            <input name="id" class="form-control" placeholder="ID check from card given in database" type="text" required//>
                      </div>   
                      <div class="form-group">
                            <label>
                              Name
                            </label>
                            <input name="name" class="form-control" placeholder="Name" type="text" required//>
                      </div>
                       <div class="form-group">
                              <label>
                                Email Id
                              </label>
                              <input name="email" class="form-control" placeholder="Email address" type="email" />
                        </div>
                       <div class="form-group">
                              <label>
                                Password
                              </label>
                              <input name ="password" id="password" class="form-control" placeholder="Create password" type="password"  pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,16}" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 and less than 16"  required />
                        </div>
                      <div class="form-group">    
                              <label>
                                Confirm password
                              </label>
                               <input name ="repeat_password" id="confirm_password" class="form-control" placeholder="Repeat password" type="password"  pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,16}" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 and less than 16"  required/>
                      </div>
                      <div class="form-group">
                        <label>Age</label>
                          <input class="form-control" type="number" name="age" min="19" max="99" required/>
                        </div>
                        <div class="form-group">
                          <label for="color">Favourite Color</label>
                            <select id="color" name="color" class="form-control">
                              <option selected >blue</option>
                              <option>orange</option>
                              <option>red</option>
                              <option>white</option>
                              <option>green</option>
                              <option>red</option>
                            </select>
                          </div>
                       <div class="form-group">   
                              <label>
                                Username
                              </label>
                              <input name="username" class="form-control" placeholder="User Name" type="text" pattern="[a-z]{1,15}"title="Username should only contain lowercase letters. e.g. siddharth not more than 15 charecters long" required/>
                         </div>
                         <div class="form-group">     
                                <label for="exampleFormControlSelect1">GENDER</label>
                                    <br>
                                <label class="radio-inline">
                                  <input type="radio" name="gender" value="male" >Male
                                  </label>
                                  <label class="radio-inline">
                                    <input type="radio" name="gender" value="female">Female
                                  </label>
                                  <label class="radio-inline">
                                    <input type="radio" name="gender" value="other">Other
                                  </label>
                                </div>
                          <input  type="submit" class="btn btn-success btn-block submit" value="Update Account">
			  <a href="fetch.html"><p>Do you want to see database?</p></a>
                        </div>
                      </form>
                  </div>
                </div>
        </div>
   <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
   <script type="text/javascript">
            function getParams(){
                var idx = document.URL.indexOf('?');
                var params = new Array();
                if (idx != -1) {
                    var pairs = document.URL.substring(idx+1,document.URL.length).split('&');
                    for (var i=0; i<pairs.length; i++){
                        nameVal = pairs[i].split('=');
                        params[nameVal[0]] = nameVal[1];
                    }
                }
                return params;
            }
            params = getParams();
            id=unescape(params["id"]);
            name= unescape(params["name"]);
            Email = unescape(params["email"]);
            Password=unescape(params["password"]);
            Age=unescape(params["age"]);
            Color=unescape(params["color"]);
            Username= unescape(params["username"]);
            Gender=unescape(params["gender"]);
		
			var arr = {name:name,email:Email,password:Password,age:Age,color:Color,username:Username,gender:Gender};
    $.ajax({
        url: 'https://technocracy-task-2.herokuapp.com/people/'+id,
        type: 'PUT',
        data: JSON.stringify(arr),
        contentType: 'application/json; charset=utf-8',
        dataType: 'json',
        async: true,
        success: function(msg) {
            alert("updated");
        },
		
				    error: function (jqXHR, exception) {
                        var msg = '';
                          if (jqXHR.status === 0) {
                              msg = 'Not connect.\n Verify Network.';
                          } else if (jqXHR.status == 404) {
                              msg = 'Requested page not found. [404]';
                          } else if (jqXHR.status == 500) {
                              msg = 'Entered values must be unique for the user  |  Internal Server Error [500].';
                          } else if (exception === 'parsererror') {
                              msg = 'Requested JSON parse failed.';
                          } else if (exception === 'timeout') {
                              msg = 'Time out error.';
                          } else if (exception === 'abort') {
                              msg = 'Ajax request aborted.';
                          } else {
                              msg = 'Uncaught Error.\n' + jqXHR.responseText;
                          }
                          alert(msg);
                }
				});
	</script>

</body>
</html>
